<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kino & Shorts MiniApp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            background: linear-gradient(135deg, #131927, #2082c6 60%);
            color: #edf2fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
        }
        .header {
            background: #0a143a;
            padding: 1.5rem;
            text-align: center;
            font-weight: bold;
            font-size: 2rem;
        }
        .container {
            max-width: 600px;
            margin: 2rem auto;
        }
        .card {
            background: #21284a;
            margin-bottom: 1.3rem;
            padding: 1.2rem;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(33,40,74,0.16);
        }
        .card-title {
            color: #18a0f2;
            font-size: 1.2rem;
            margin-bottom: .4rem;
        }
        .card-video { width: 100%; border-radius: .8rem; margin-bottom: .7rem; }
        .stats { color: #a3bdd7; font-size: .95rem; }
        .mode-switcher {
            position: fixed; top: 10px; right: 10px;
            background: #1a233a; color: #b9d6f9;
            border: none; border-radius: .5rem; padding: .6rem 1.2rem;
            cursor: pointer; font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="header">Kino & Shorts Mini App</div>
    <button class="mode-switcher" onclick="toggleMode()">Dark Blue / Dark</button>
    <div class="container" id="content"></div>
    <script>
        let darkBlue = true;
        function toggleMode() {
            if (darkBlue) {
                document.body.style.background = "#000001";
                document.querySelector('.header').style.background = "#101010";
                darkBlue = false;
            } else {
                document.body.style.background = "linear-gradient(135deg, #131927, #2082c6 60%)";
                document.querySelector('.header').style.background = "#0a143a";
                darkBlue = true;
            }
        }
        async function loadApi(type) {
            let url = type === 'cinema' ? '/cinemas' : '/shorts';
            let res = await fetch(url);
            let data = await res.json();
            let html = data.map(item => `
                <div class="card">
                    <div class="card-title">${item.title}</div>
                    <video class="card-video" controls src="${item.video_link}"></video>
                    <div class="stats">${item.views} marta koâ€˜rilgan</div>
                </div>
            `).join('');
            document.getElementById('content').innerHTML = html;
        }
        loadApi('cinema');
    </script>
</body>
</html>